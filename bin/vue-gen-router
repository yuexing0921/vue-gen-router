#!/usr/bin/env node

const path = require("path");
const fs = require("fs");
const utils = require("../dist/util");
const yargs = require("yargs").options({
	input: {
		alias: "i",
		describe: "The yaml/js/ts/tsx file that needs to be transformed",
        type: "string",
        demandOption: true
	},
	output: {
		alias: "o",
		describe: "Generate source file",
		type: "string",
		default: "src/routers"
	},
	file: {
		alias: "f",
		describe: "File name",
		type: "string",
		default: "config.tsx"
	},
	comment: {
		alias: "c",
		describe: "Add code comments",
		type: "string",
		default: "Automatically generated by the command line vue-gen-router"
	} 
});

const argv = yargs.argv;

const inputPath = path.resolve(argv.input);

/**
 * 判断要转换的文件是否存在
 */
if (!fs.existsSync(inputPath)) {
    utils.printError(`${inputPath} not find.`);
    console.log();
    yargs.showHelp();
    return;
}

const { run } = require("../dist");

const buildOption = {
	output: argv.output,
	input: argv.input,
	file: argv.file,
	comment: argv.comment
};

run(buildOption);
